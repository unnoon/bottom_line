"use strict";(function(){function a(a,d,e){var f=b[d]=e.init||function(){};a&&c.getOwnPropertyNames(a).forEach(function(e){if(!/^length|name|arguments|caller|prototype$/.test(e)){var g=c.getOwnPropertyDescriptor(a,e);f.hasOwnProperty(e)&&console.warn("overwriting existing property: "+e+" on _."+d+" while copying native statics"),b.hasOwnProperty(e)&&console.warn("overwriting existing property: "+e+" on _ while copying native statics, for shorthand: "+d),c.defineProperty(f,e,g),c.defineProperty(b,e,g)}});var g=e.static||{};c.getOwnPropertyNames(g).forEach(function(a){var e=c.getOwnPropertyDescriptor(g,a);e.enumerable=!1,f.hasOwnProperty(a)&&console.warn("overwriting existing property: "+a+" on _."+d+" while copying statics"),c.defineProperty(f,a,e),"int"!==d&&(b.hasOwnProperty(a)&&console.warn("overwriting existing property: "+a+" on _ while copying statics"),c.defineProperty(b,a,e))});var h=e.prototype||{};c.getOwnPropertyNames(h).forEach(function(b){var d=c.getOwnPropertyDescriptor(h,b);d.enumerable=!1,a.prototype.hasOwnProperty(b)&&console.warn("overwriting existing property: "+b+" on _."+a+" while copying prototype methods"),c.defineProperty(a.prototype,b,d)})}var b={};"undefined"!=typeof module&&module.exports?module.exports=b:this._=b;var c=Object,d=Array,e=Math,f={__edit:function(a,c,d,e,f,g,h){var i,j,k=!a,l=!c,m=!1,n="function"==typeof g?g:(i=b.isArray(g))?function(a){return g._has(a)}:function(a){return a===g};return this["_each"+(e?"Right":"")](function(a,b,c,e){return j=n.call(h,a,b,c,e),(j===l||m)&&d.call(f,a,b,c,e),k&&j&&!m?(m=i?!g._without(a).length:!0,!(l&&m)):void 0},this),f},_find:function(a,b){var c;return this._each(function(d){return a.call(b,d)?(c=d,!1):void 0}),c}};a(Object,"obj",{"static":{clone:function g(a){var g=c.create(c.getPrototypeOf(a));return c.getOwnPropertyNames(a)._each(function(b){c.defineProperty(g,b,c.getOwnPropertyDescriptor(a,b))}),g},extend:function(a,b,d){var e,f;return d=d?d:b,e=d?b:{},e.enumerable=e.enumerable!==!1,e.configurable=e.configurable!==!1,e.writable=e.writable!==!1,d._each(function(b,g){a.hasOwnProperty(g)?console.warn("overwriting existing property: "+g+" while extending: "+a.toString()):g in a&&console.warn("overriding existing property: "+g+" while extending: "+a.toString()),f=c.getOwnPropertyDescriptor(d,g),f.enumerable=e.enumerable,f.configurable=e.configurable,f.hasOwnProperty("writable")&&(f.writable=e.writable),c.defineProperty(a,g,f)}),a},isDefined:function(a){return void 0!==a},isUndefined:function(a){return void 0===a},"typeof":function(a){return c.prototype.toString.call(a)._between("[object ","]")._decapitalize()}},prototype:{_each:function(a,b){for(var c in this)if(this.hasOwnProperty(c)&&a.call(b,this[c],c,this)===!1)break},__edit:f.__edit,_filter:function(a,b){var c=[];return this._each(function(d){a.call(b,d)&&c.push(d)}),c},_find:f._find,_keys:function(){return c.keys(this)},_names:function(){return c.getOwnPropertyNames(this)},_pairs:function(){var a=[];return this._each(function(b,c){a.push(c,b)}),a},_proto:function(a){return void 0===a?c.getPrototypeOf(this):(this.__proto__=a,this)},_remove:function(a){this.__remove(!0,a)},_removeAll:function(a){this.__remove(!1,a)},__remove:function(a,c){var d=b.typeof(c);if("array"===d){var e=c;this._each(function(b,c){return e._has(b)&&(delete this[c],a)?(e._remove(b),!!e.length):void 0},this)}else{var f="function"===d?c:function(a){return a===c};this._each(function(b,c){return f(b,c,this)?(delete this[c],a):void 0},this)}return this},_rm:function(a,b,c,d){return this.__edit(a,b,function(a,b){delete this[b]},a,this,c,d)},_values:function(){var a=[];return this._each(function(b){a.push(b)}),a},_without:function(a,b){return this._rm(!1,!1,a,b)},_withoutKeys:function(a){var b=typeof a;if("string"===b)delete this[a];else{var c="function"===b?a:function(b){return a._has(b)};this._each(function(a,b){c(b)&&delete this[b]},this)}return this}}}),a(Array,"arr",{init:function(a){var e=b.typeof(a);switch(e){case"arguments":return d.prototype.slice.call(a,0);case"object":case"function":return c.getOwnPropertyNames(a).map(function(b){return{prop:b,value:a[b]}});case"array":return a;case"undefined":case"null":return[];default:return[a]}},"static":{concat:function(){return d.prototype.concat.apply(null,arguments)}},prototype:{_append:function(a){return this.push.apply(this,a),this},_$append:function(a){return b.clone(this)._append(a)},_avg:function(){return this.sum()/this.length},_compact:function(){return this._withoutAll(function(a){return!a})},_$compact:function(){return this._$withoutAll(function(a){return!a})},_copy:function(a,b,c){return this.__cp(!1,!1,a,b,c)},_copyAll:function(a,b,c){return this.__cp(!0,!1,a,b,c)},_copyKeys:function(a,b,c){return this.__cpKeys(!1,a,b,c)},__cp:function(a,b,c,d,e){return this.__edit(a,b,function(a){this.push(a)},!1,c,d,e)},__cut:function(a,b,c,d,e){return this.__edit(a,b,function(a,b,c){this.push(a),c.splice(b,1)},!1,c,d,e)},__cutKeys:function(a,b,c,d){return this.__editKeys(a,function(a,b){this.push(b[a]),b.splice(a,1)},!1,b,c,d)},_cut:function(a,b,c){return this.__cut(!1,!1,a,b,c)},_cutAll:function(a,b,c){return this.__cut(!0,!1,a,b,c)},_cutKeys:function(a,b,c){return this.__cutKeys(!1,a,b,c)},__cpKeys:function(a,b,c,d){return this.__editKeys(a,function(a,b){this.push(b[a])},!1,b,c,d)},__edit:f.__edit,__editKeys:function(a,c,d,e,f,g){var h,i,j,k=typeof f,l=!("number"==typeof g||"function"===k),m=!a,n=!1,o="function"===k?f:(i=b.isArray(f))?function(a){return f._has(a)}:void 0===g?function(a){return a===f}:function(a){return a._between(f,g)};return this["_each"+(d?"Right":"")](function(a,b,d,k){return h=b-k,j=o.call(g,h,d),(j===m||n)&&c.call(e,b,d),l&&j&&!n?(n=i?!f._without(h).length:!0,!(m&&n)):void 0},this),e},__del:function(a,b,c){return this.__editKeys(a,function(a){this.splice(a,1)},!1,this,b,c)},__del2:function(a,c,d){var e=!a;switch(b.typeof(c)){case"number":var f=c,g=d||f;e?this.splice(f,g-f+1):(this.splice(g+1,this.length-g),this.splice(0,f));break;case"function":var h=c;this._each(function(a,b,c,f){h.call(d,b-f,this)===e&&this.splice(b,1)},this);break;case"array":this._each(function(a,b,d,f){return c._has(b-f)===e?(c._without(b-f),this.splice(b,1),!!c.length):void 0},this)}return this},_diff:function(a){return this._without(a)},_$diff:function(a){return this._$selectAll(function(b){return!a._has(b)})},_dimit:function(a,c){function d(e,f,h){for(var i=0,j=h[f];j>i;i++)e[i]=f===h.length-1?g.call(c):new Array(h[f+1]),f===h.length-2&&b.isUndefined(a)||d(e[i],f+1,h)}var e=this,f=new Array(e[0]),g="function"==typeof a?a:function(){return a};return d(f,0,e),f},_each:function(a,b,c){return"function"==typeof a?this.__each(1,a,b):this.__each(a,b,c)},__each:function(a,b,c){for(var d,e,f=0,g=this.length,h=g,i=0,j=f;g>j;j+=a)if(void 0!==(d=this[j])||this.hasOwnProperty(j)){if(b.call(c,this[j],j,this,i)===!1)return!1;(e=this.length-h)&&(j+=e,g+=e,h+=e,i+=e)}return!0},_eachRight:function(a,b,c){return"function"==typeof a?this.__eachRight(1,a,b):this.__eachRight(a,b,c)},__eachRight:function(a,b,c){var d,e=this.length-1,f=-1;b=c?b.bind(c):b;for(var g=e;g>f&&(void 0===(d=this[g])&&!this.hasOwnProperty(g)||b(this[g],g,this)!==!1);g-=a);return this},_find:f._find,_findAll:function(a,b){return this._$selectAll(a,b)},_first:function(a){return void 0===a?this[0]:(this[0]=a,this)},_flatten:function(){return this._each(function(a,c){b.isArray(a)&&this.splice.apply(this,a._insert(1)._insert(c))},this)},_$flatten:function(){return this.concat.apply([],this)},_has:function(a){return this.indexOf(a)>-1},_insert:function(a,b){return this.splice(b,0,a),this},_intersect:function(a){return this._selectAll(function(b){return a._has(b)},this)},_$intersect:function(a){return this._$selectAll(function(b){return a._has(b)},this)},_intersects:function(a){var b=!1;return this._each(function(c){return a._has(c)?!(b=!0):void 0}),b},_last:function(a){return void 0===a?this[this.length-1]:(this[this.length-1]=a,this)},_max:function(a){if(void 0===a)return e.max.apply(null,this);var b=this[0];return this._each(function(c){b=a(c,b)>0?c:b}),b},_min:function(a){if(void 0===a)return e.min.apply(null,this);var b=this[0];return this._each(function(c){b=a(c,b)<0?c:b}),b},_modify:function(a,b){return this._each(function(c,d){this[d]=a.call(b,c,d,this)},this),this},_$modify:function(a,c){return b.clone(this)._modify(a,c)},_random:function(){return this[b.int.random(0,this.length-1)]},__rm:function(a,b,c,d){return this.__edit(a,b,function(a,b){this.splice(b,1)},!1,this,c,d)},_select:function(a,b){return this.__rm(!1,!0,a,b)},_$select:function(a,b){return this.__cp(!1,!1,[],a,b)},_selectAll:function(a,b){return this.__rm(!0,!0,a,b)},_$selectAll:function(a,b){return this.__cp(!0,!1,[],a,b)},_selectKeys:function(a,b){return this.__del(!0,a,b)},_$selectKeys:function(a,b){return this.__cpKeys(!1,[],a,b)},_size:function(a){return void 0===a?this.length:(this.length=a,this)},_sum:function(){return this.reduce(function(a,b){return a+b})},_unify:function(a){return this._append(a)._unique()},_$unify:function(a){return this._$append(a)._unique()},_unique:function(){return this._eachRight(function(a,b){this._each(function(c,d){return a===c&&b>d?(this.splice(b,1),!1):b>d},this)},this),this},_$unique:function(){var a=[];return this._each(function(b){a._has(b)||a.push(b)},this),a},_without:function(a,b){return this.__rm(!1,!1,a,b)},_$without:function(a,b){return this.__cp(!1,!0,[],a,b)},_withoutAll:function(a,b){return this.__rm(!0,!1,a,b)},_$withoutAll:function(a,b){return this.__cp(!0,!0,[],a,b)},_withoutKeys:function(a,b){return this.__del(!1,a,b)},_$withoutKeys:function(a,b){return this.__cpKeys(!0,[],a,b)}}}),a(String,"str",{prototype:{_after:function(a){var b=this.indexOf(a);return b>-1?this.slice(b+a.length):""},_afterLast:function(a){var b=this.indexOf(a);return b>-1?this.slice(b+a.length):""},_before:function(a){var b=this.indexOf(a);return b>-1?this.slice(0,b):""},_beforeLast:function(a){var b=this.indexOf(a);return b>-1?this.slice(0,b):""},_between:function(a,b){return this._after(a)._before(b)},_capitalize:function(){return this[0]?this[0].toUpperCase()+this.slice(1):this},_decapitalize:function(){return this[0]?this[0].toLowerCase()+this.slice(1):this},_endsWith:function(a){return this.slice(-a.length)===a},_has:function(a){return this.indexOf(a)>-1},_insert:function(a,b){return this._splice(b,0,a)},_isLowerCase:function(){return this==this.toLowerCase()},_isUpperCase:function(){return this==this.toUpperCase()},_splice:function(a,b,c){return this.slice(0,a)+c+this.slice(a+e.abs(b))},_startsWith:function(a){return 0===this.indexOf(a)}}}),a(Math,"math",{"static":{byProb:function(a){return e.random()<a},distance:function(a,b,c,d){return e.sqrt((a-c)*(a-c)+(b-d)*(b-d))}}}),a(Number,"num",{"static":{random:function(a,c){var d=a||0,f=c||1;return b.isDefined(c)?e.random()*(f-d)+d:e.random()},rebound:function(a){return function(b,c){return b+a%(c-b)}}},prototype:{get _sign(){return this>0?1:0>this?-1:0},get _even(){return!(1&this)},get _odd(){return!!(1&this)},_between:function(a,b){return this>=a&&b>=this},_bound:function(a,c){return b.min(b.max(this,a),c)},_rebound:function(a,b){return a+this%(b-a)}}}),a(Function,"fnc",{"static":{callAfter:function(a,b){setTimeout(b,a)},memoize:function(){},partial:function(a,b){var c=arguments;return function(){for(var a=0,d=0;a<c.length&&d<arguments.length;a++)void 0===c[a]&&(c[a]=arguments[d++]);return b.apply(this.args)}},strap:function(a,c){var d=b.arr(arguments);return c=d.pop(),c.bind.apply(c,[null]._append(d))},bind:function(a,c,d){var e=b.arr(arguments);return d=e.pop(),d.bind.apply(d,e)}}}),a(null,"physics",{"static":{speed2velocity:function(a,c,d){var e=d/b.sqrt(a*a+c*c);return{x:e*a,y:e*c}},velocity2speed:function(a,c){return b.sqrt(a*a+c*c)}}}),a(null,"int",{init:function(a){return 0|a},"static":{random:function(a,b){return a+e.random()*(b+1-a)|0},rebound:function(a){return function(b,c){var d=a%(e.abs(c-b)+1);return(0>d?c+1:b)+d}}}})}).call(this);